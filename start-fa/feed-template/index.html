<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>feed template - شروع</title>
    <link rel="icon" type="image/png" sizes="96x96" href="/static/img/mira.png">

    <!-- Bootstrap -->
    <link href="/static/theme/maira/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/theme/maira/css/maira.css" rel="stylesheet">

    <link href="/static/theme/maira/css/font-awesome.min.css" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="https://cdn.rawgit.com/rastikerdar/vazir-font/v10.0.0-beta/dist/font-face.css">
    <link type="text/css" rel="stylesheet" href="https://cdn.rawgit.com/rastikerdar/shabnam-font/v1.1.0/dist/font-face.css">
    <link type="text/css" rel="stylesheet" href="https://cdn.rawgit.com/rastikerdar/sahel-font/v1.0.0-alpha9/dist/font-face.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>

    <nav class="navbar navbar-default navbar-transparent navbar-fixed-top navbar-burger" color-on-scroll="200">
        <!-- if you want to keep the navbar hidden you can add this class to the navbar "navbar-burger"-->
        <div class="container">
            <div class="navbar-header">
                <button id="menu-toggle" type="button" class="navbar-toggle" data-toggle="collapse" data-target="#example">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar bar1"></span>
                    <span class="icon-bar bar2"></span>
                    <span class="icon-bar bar3"></span>
                </button>
                <a href="/start-fa" class="navbar-brand">
                    شروع
                </a>
            </div>
            <div class="collapse navbar-collapse">
                <ul class="nav navbar-nav navbar-right navbar-uppercase">
                    
                    <li class="dropdown rtl">
                        <a href="#chapter" class="dropdown-toggle" data-toggle="dropdown">
                            <i class="fa fa-angle-down"></i>
                            chapter
                            
                        </a>
                        <ul class="dropdown-menu dropdown-danger">
                        
                            <li>
                                <a href="/start-fa/chapter/start/">01</a>
                            </li>
                        
                            <li>
                                <a href="/start-fa/chapter/conditions/">02</a>
                            </li>
                        
                            <li>
                                <a href="/start-fa/chapter/fields/">03</a>
                            </li>
                        
                            <li>
                                <a href="/start-fa/chapter/config/">04</a>
                            </li>
                        
                            <li>
                                <a href="/start-fa/chapter/content/">05</a>
                            </li>
                        
                            <li>
                                <a href="/start-fa/chapter/statics/">06</a>
                            </li>
                        
                            <li>
                                <a href="/start-fa/chapter/template/">07</a>
                            </li>
                        
                            <li>
                                <a href="/start-fa/chapter/customize/">08</a>
                            </li>
                        
                            <li>
                                <a href="/start-fa/chapter/publish/">09</a>
                            </li>
                        
                        </ul>
                    </li>
                        

                    
                    <li class="dropdown">
                        <a href="#social" class="dropdown-toggle" data-toggle="dropdown">
                            <i class="fa fa-share-alt"></i> Socials
                        </a>
                        <ul class="dropdown-menu dropdown-danger">
                            
                            <li>
                                <a href="https://twitter.com/Twitter_UserName"><i class="fa fa-twitter"></i> twitter</a>
                            </li>
                            
                            <li>
                                <a href="https://github.com/GitHub_UserName"><i class="fa fa-github"></i> github</a>
                            </li>
                            
                            <li>
                                <a href="https://instagram.com/NAME"><i class="fa fa-instagram"></i> instagram</a>
                            </li>
                            
                            <li>
                                <a href="https://instagram.com/NAME"><i class="fa fa-google-plus-square"></i> google+</a>
                            </li>
                            
                            <li>
                                <a href="https://instagram.com/NAME"><i class="fa fa-facebook-square"></i> facebook</a>
                            </li>
                            
                        </ul>
                    </li>
                    
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
    </nav>

    <div class="section section-header">
        <div class="parallax filter filter-color-black">
        
            <div class="image"
                style="background-image: url('/static/img/head-2.jpg')">
            </div>
        
            <div class="container">
                <div class="content">
                    <div class="title-area">
                        <h1 class="title-modern">شروع</h1>
                        <div class="separator line-separator">♦</div>
                        <h3>feed template</h3>
                    </div>
                </div>
            </div>
        </div>
        <div class="btn-paging">
            <a href="#start" class="btn btn-white"><i class="fa fa-angle-down"></i></a>
        </div>
    </div>

    <div class="section" id="start">
        <div class="container">
            <div class="row">
            
            <div class="col-md-10 col-md-offset-1 rtl">
            <div class="post-content">
                <a href="/start-fa/feed-template/"><h2 class="post-title">feed template</h2></a>
                <div class="post-date"><time datetime="2017-03-28 19:21:48" itemprop="datePublished">، &nbsp;&nbsp;</time></div>
                <div class="post-body">
                    <a name="more"></a>
<p>آخرین فایل atom.tt2 که برای ساختن فید مطالب هر سایت به کار می‌رود، البته میتوانید با هر یک از استانداردهای مورد قبول که دوست دارید فید خود را بسازید و الزامی به atom بودن آن نیست، نهایتا خروجی این فایل، فایل feed.xml در شاخه اصلی هر سایت خواهد بود.</p>

<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"&gt;
  &lt;channel&gt;
    &lt;title&gt;{{ TITLE }}&lt;/title&gt;
    &lt;description&gt;{{ DESCRIPTION }}&lt;/description&gt;
    &lt;link&gt;{{ URL }}&lt;/link&gt;
    &lt;atom:link href="{{ URL }}/feed.xml" rel="self" type="application/rss+xml" /&gt;
    &lt;pubDate&gt;{{ Build.date }}&lt;/pubDate&gt;
    &lt;lastBuildDate&gt;{{ DATE }}&lt;/lastBuildDate&gt;
    &lt;generator&gt;mira&lt;/generator&gt;
    {{ FOREACH post IN POSTS }}
        &lt;item&gt;
          &lt;title&gt;{{ post.title }}&lt;/title&gt;
          &lt;description&gt;{{ post.body.more | html }}&lt;/description&gt;
          &lt;pubDate&gt;{{ post.date }}&lt;/pubDate&gt;
          &lt;link&gt;{{ post.url }}&lt;/link&gt;
          &lt;guid isPermaLink="true"&gt;{{ post.url }}&lt;/guid&gt;
    {{- FOREACH list IN SITE.lists -}}
        {{ IF post.$list }}
        &lt;{{ list }}&gt;
           {{- FOREACH arch IN post.$list.values -}}
            {{- arch.name -}}
            {{- IF (loop.index != loop.max) -}},{{- END -}}
           {{- END -}}
        &lt;/{{ list }}&gt;
        {{ END }}
    {{- END -}}
        &lt;/item&gt;
    {{ END }}
  &lt;/channel&gt;
&lt;/rss&gt;
</code></pre>

<p><strong>نکته</strong>: در این قالب چند نکته جدید را می‌بینید، یکی برچسب BUILD که اطلاعات زمان اجرای فرمان build را در خود دارد، مانند CALENDAR برای هر پست</p>

<p>و دیگری استفاده جدید از حلقه ها و متغیرهای آن‌ها، خط هجده را ببینید:</p>

<pre><code>{{- FOREACH list IN SITE.lists -}}
        {{ IF post.$list }}
    ...
    ...
       {{- FOREACH arch IN post.$list.values -}}
</code></pre>

<p>در حلقه‌ی اول هر لیستی را که در فایل تنظیمات سایت تنظیم کرده‌ایم را چک می‌کند و از این به بعد با استفاده از علامت $ به جای {{}} میتوانیم از مقدار متغیر در کدهای قالب استفاده کنیم، در خط بعد چک میکنیم اگر این مقدار در پست وجود داشته باشد، در حلقه‌ی جدید نام آن را استخراج می‌کنیم.</p>

<p>حلقه‌ی بالا برای نمایش دادن تمام لیست‌های آرشیو موجود در هر سایت است، یعنی مثلا اگر category در هدر باشد، مقدار یا مقدارهای آن‌را به نمایش در می‌آورد، اما ممکن است بپرسید چرا در قالب post از این روش استفاده نکردیم و با استفاده از IF و FOREACH جدا جدا هر لیست را لود کردیم؟!</p>

<p>جواب ساده است، برای اینکه کنترل بیشتری بر روی مکان هر آرشیو داشته باشیم، میخواستیم ترتیب لیست‌ها و مکان قرار گیریشان در قالب دقیقا تحت کنترل خودمان باشد، مثلا نام نویسنده را قبل از بدنه محتوا قرار بدهیم و دسته بندی ها را بعد از آن. اما برای feed نیازی به این مورد نداشتیم، فقط نیاز داریم همه‌ی لیست‌ها دقیقا بعد از متن نمایش داده شوند.</p>

<p>همچنین از یک شرط جدید هم استفاده شده:</p>

<pre><code>{{- IF (loop.index != loop.max) -}},{{- END -}}
</code></pre>

<p>با استفاده از loop میتوانیم مشخصات حلقه‌ی در حال اجرا را چک کنیم، loop.index می‌گوید که مرتبه چندم از اجرای حلقه هستیم و loop.max، حداکثر دفعاتی که یک حلقه FOREACH با توجه به سایز لیستی که لود کرده خواهد داشت.</p>

<p>آیتم‌هایی که نمایش داده می‌شوند را با یک کاما بعد از هر کدام از هم جدا کردیم، اما نمیخواستیم که کاما بعد از آخرین آیتم هم نمایش داده شود، پس چک کردیم که اگر در آخر حلقه هستیم دیگر کاما نمایش داده نشود.</p>

<p>بدون این شرط، برچسب زیر
    <tags>vimrc,terminal,vimrc bank,ترمینال,vim</tags></p>

<p>به شکل زیر، بعد از vim یک کامای اضافه نمایش داده خواهد شد:</p>

<pre><code>&lt;tags&gt;vimrc,terminal,vimrc bank,ترمینال,vim,&lt;/tags&gt;
</code></pre>

<p>و نکته‌ی آخر، بعضی از خط ها بعد و قبل از استفاده از جفت آکولادها {{ }} از یک خط تیره - استفاده شده {{- -}}، آکولادها قبل و بعد از خود یک کاراکتر خط جدید را هم به نمایش در می‌آورند. البته برای ساختن قالب‌های html چندان اهمیتی ندارند، چرا که در html تا از <br> یا <p></p> یا سایر برچسب‌های مشابه استفاده نکنیم خطوط جدید ساخته نمی‌شوند، و این کاراکترهای خط جدید که قبل و بعد از آکولاد تولید می‌شوند، باعث تفکیک کدها و خواناتر شدن آن هم می‌شوند. اما برای ساختن یک xml تمیز بهتر است که این کاراکترهای خط جدید وجود نداشته باشند. با گذاشتن خط تیره - مانع از فاصله افتادن بین خطوط می‌شویم.</p>
                </div>                                 
                
                chapter: 
                <div class="post-meta">                        <a href="/start-fa/chapter/template/">07</a>                </div>
                            </div>
            <div class="separator">✻</div>
            </div>
            

            <div class="col-md-10 col-md-offset-1">
                <nav aria-label="Page navigation">
                    <ul class="pager">
                        
                        <li class="previous"><a href="/start-fa/post-template/"><span aria-hidden="true">&larr;</span> post template</a></li>
                        
                        
                        <li class="next"><a href="/start-fa/sidebar/">ساختن یک ساید بار <span aria-hidden="true">&rarr;</span></a></li>
                        
                    </ul>
                </nav>
            </div>
            </div>
        </div>
    </div>
  <footer class="footer footer-big footer-color-black" data-color="black">
    <div class="container">
        <div class="row">
            <div class="col-md-2 col-sm-3">
                <div class="info">
                    <h5 class="title">Company</h5>
                    <nav>
                        <ul>
                            <li>
                                <a href="/">Home</a></li>
                            <li>
                                <a href="#">Find offers</a>
                            </li>
                            <li>
                                <a href="#">Discover Projects</a>
                            </li>
                            <li>
                                <a href="#">Portfolio</a>
                            </li>
                            <li>
                                <a href="#">About me</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
            <div class="col-md-3 col-md-offset-1 col-sm-3">
                <div class="info">
                    <h5 class="title"> Help and Support</h5>
                     <nav>
                        <ul>
                            <li>
                                <a href="your-email@domain.com">Contact me</a>
                            </li>
                            <li>
                                <a href="#">How it works</a>
                            </li>
                            <li>
                                <a href="#">Terms &amp; Conditions</a>
                            </li>
                            <li>
                                <a href="#">Policy</a>
                            </li>
                            <li>
                                <a href="#">License</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
            <div class="col-md-3 col-sm-3">
                <div class="info">
                    <h5 class="title">Latest posts</h5>
                    <nav>
                        <ul>
                            
                        </ul>
                    </nav>
                </div>
            </div>
            <div class="col-md-2 col-md-offset-1 col-sm-3">
                <div class="info">
                    <h5 class="title">Follow me on</h5>
                    
                    <nav>
                        <ul>
                            
                            <li>
                                <a href="https://twitter.com/Twitter_UserName" class="btn btn-social btn-twitter btn-simple">
                                    <i class="fa fa-twitter"></i> twitter
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/GitHub_UserName" class="btn btn-social btn-github btn-simple">
                                    <i class="fa fa-github"></i> github
                                </a>
                            </li>
                            <li>
                                <a href="https://instagram.com/NAME" class="btn btn-social btn-instagram btn-simple">
                                    <i class="fa fa-instagram"></i> instagram
                                </a>
                            </li>
                            <li>
                                <a href="https://instagram.com/NAME" class="btn btn-social btn-google-plus-square btn-simple">
                                    <i class="fa fa-google-plus-square"></i> google+
                                </a>
                            </li>
                            <li>
                                <a href="https://instagram.com/NAME" class="btn btn-social btn-facebook-square btn-simple">
                                    <i class="fa fa-facebook-square"></i> facebook
                                </a>
                            </li>                        </ul>
                    </nav>
                    
                </div>
            </div>
        </div>
        <hr>
        <div class="copyright">
             <p>© <script> document.write(new Date().getFullYear()) </script></p>
             <p>generated by <a href="https://miraxy.github.io/">mira</a></p>
        </div>
    </div>
  </footer>


    <script src="/static/theme/maira/js/jquery.min.js"></script>
    <script src="/static/theme/maira/js/modernizr.js"></script>
    <script src="/static/theme/maira/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="/static/theme/maira/js/run.js" type="text/javascript"></script>
    <script src="/static/theme/maira/js/gaia.js" type="text/javascript"></script>
    <script src="/static/theme/maira/js/prettify/prettify.js" type="text/javascript"></script>

  </body>
</html>
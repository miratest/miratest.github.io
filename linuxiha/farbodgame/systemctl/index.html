<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>مدیریت سرویس‌ها توسط systemctl - آموزش لینوکس</title>
    <link rel="icon" type="image/png" sizes="96x96" href="/static/img/mira.png">

    <!-- Bootstrap -->
    <link href="/static/theme/maira/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/theme/maira/css/maira.css" rel="stylesheet">

    <link href="/static/theme/maira/css/font-awesome.min.css" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="https://cdn.rawgit.com/rastikerdar/vazir-font/v10.0.0-beta/dist/font-face.css">
    <link type="text/css" rel="stylesheet" href="https://cdn.rawgit.com/rastikerdar/shabnam-font/v1.1.0/dist/font-face.css">
    <link type="text/css" rel="stylesheet" href="https://cdn.rawgit.com/rastikerdar/sahel-font/v1.0.0-alpha9/dist/font-face.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>

    <nav class="navbar navbar-default navbar-transparent navbar-fixed-top navbar-burger" color-on-scroll="200">
        <!-- if you want to keep the navbar hidden you can add this class to the navbar "navbar-burger"-->
        <div class="container">
            <div class="navbar-header">
                <button id="menu-toggle" type="button" class="navbar-toggle" data-toggle="collapse" data-target="#example">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar bar1"></span>
                    <span class="icon-bar bar2"></span>
                    <span class="icon-bar bar3"></span>
                </button>
                <a href="/linuxiha" class="navbar-brand">
                    آموزش لینوکس
                </a>
            </div>
            <div class="collapse navbar-collapse">
                <ul class="nav navbar-nav navbar-right navbar-uppercase">
                    
                    <li class="dropdown rtl">
                        <a href="#author" class="dropdown-toggle" data-toggle="dropdown">
                            <i class="fa fa-angle-down"></i>
                            author
                            
                        </a>
                        <ul class="dropdown-menu dropdown-danger">
                        
                            <li>
                                <a href="/linuxiha/author/farbodgame/">farbodgame</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/author/MrNull/">MrNull</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/author/rmasoumvand/">rmasoumvand</a>
                            </li>
                        
                        </ul>
                    </li>
                        
                    <li class="dropdown rtl">
                        <a href="#categories" class="dropdown-toggle" data-toggle="dropdown">
                            <i class="fa fa-angle-down"></i>
                            categories
                            
                        </a>
                        <ul class="dropdown-menu dropdown-danger">
                        
                            <li>
                                <a href="/linuxiha/categories/vim/">vim</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/categories/آموزشی/">آموزشی</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/categories/ترمینال/">ترمینال</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/categories/سرور/">سرور</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/categories/شبکه/">شبکه</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/categories/شخصی‌سازی/">شخصی‌سازی</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/categories/پیکربندی/">پیکربندی</a>
                            </li>
                        
                        </ul>
                    </li>
                        
                    <li class="dropdown rtl">
                        <a href="#jdate" class="dropdown-toggle" data-toggle="dropdown">
                            <i class="fa fa-angle-down"></i>
                            آرشیو زمانی
                            
                        </a>
                        <ul class="dropdown-menu dropdown-danger">
                        
                            <li>
                                <a href="/linuxiha/archive/1395/05/">مرداد ۱۳۹۵</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/archive/1395/06/">شهریور ۱۳۹۵</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/archive/1395/07/">مهر ۱۳۹۵</a>
                            </li>
                        
                        </ul>
                    </li>
                        
                    <li class="dropdown rtl">
                        <a href="#tags" class="dropdown-toggle" data-toggle="dropdown">
                            <i class="fa fa-angle-down"></i>
                            tags
                            
                        </a>
                        <ul class="dropdown-menu dropdown-danger">
                        
                            <li>
                                <a href="/linuxiha/tags/asciinema/">asciinema</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/btrfs/">btrfs</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/btrfs-لینوکس/">btrfs لینوکس</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/dhcp/">dhcp</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/dhcp-لینوکس/">dhcp لینوکس</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/Google-Authenticator/">Google Authenticator</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/linux-dhcp-server/">linux dhcp server</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/linux-ftp-server/">linux ftp server</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/linux-lvm/">linux lvm</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/linux-mdadm-raid/">linux mdadm raid</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/linux-raid/">linux raid</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/lvm/">lvm</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/lvm-در-لینوکس/">lvm در لینوکس</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/mdadm-raid/">mdadm raid</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/network-file-system/">network file system</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/nfs-debina/">nfs debina</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/nfs-linux/">nfs linux</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/nfs-در-دبیان/">nfs در دبیان</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/raid-در-لینوکس/">raid در لینوکس</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/samba/">samba</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/samba-server/">samba server</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/samba-server-لینوکس/">samba server لینوکس</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/samba-لینوکس/">samba لینوکس</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/systemctl/">systemctl</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/systemd/">systemd</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/terminal/">terminal</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/tweek-tool/">tweek tool</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/two-factor-Authenticator/">two factor Authenticator</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/two-factor-ssh/">two factor ssh</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/vim/">vim</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/vimrc/">vimrc</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/vimrc-bank/">vimrc bank</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/vsftpd/">vsftpd</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/اوبونتو/">اوبونتو</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/ترمینال/">ترمینال</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/حریم‌شخصی/">حریم‌شخصی</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/سرور/">سرور</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/شبکه/">شبکه</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/شخصی‌سازی/">شخصی‌سازی</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/شخصی‌سازی-گنوم/">شخصی‌سازی گنوم</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/فایل-سیستم-btrfs/">فایل سیستم btrfs</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/پیکربندی/">پیکربندی</a>
                            </li>
                        
                            <li>
                                <a href="/linuxiha/tags/گنوم/">گنوم</a>
                            </li>
                        
                        </ul>
                    </li>
                        

                    
                    <li class="dropdown">
                        <a href="#social" class="dropdown-toggle" data-toggle="dropdown">
                            <i class="fa fa-share-alt"></i> Socials
                        </a>
                        <ul class="dropdown-menu dropdown-danger">
                            
                            <li>
                                <a href="https://twitter.com/Twitter_UserName"><i class="fa fa-twitter"></i> twitter</a>
                            </li>
                            
                            <li>
                                <a href="https://github.com/GitHub_UserName"><i class="fa fa-github"></i> github</a>
                            </li>
                            
                            <li>
                                <a href="https://instagram.com/NAME"><i class="fa fa-instagram"></i> instagram</a>
                            </li>
                            
                            <li>
                                <a href="https://instagram.com/NAME"><i class="fa fa-google-plus-square"></i> google+</a>
                            </li>
                            
                            <li>
                                <a href="https://instagram.com/NAME"><i class="fa fa-facebook-square"></i> facebook</a>
                            </li>
                            
                        </ul>
                    </li>
                    
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
    </nav>

    <div class="section section-header">
        <div class="parallax filter filter-color-black">
        
            <div class="image"
                style="background-image: url('/linux/static/images/systemctl.jpg')">
            </div>
        
            <div class="container">
                <div class="content">
                    <div class="title-area">
                        <h1 class="title-modern">آموزش لینوکس</h1>
                        <div class="separator line-separator">♦</div>
                        <h3>مدیریت سرویس‌ها توسط systemctl</h3>
                    </div>
                </div>
            </div>
        </div>
        <div class="btn-paging">
            <a href="#start" class="btn btn-white"><i class="fa fa-angle-down"></i></a>
        </div>
    </div>

    <div class="section" id="start">
        <div class="container">
            <div class="row">
            
            <div class="col-md-10 col-md-offset-1 rtl">
            <div class="post-content">
                <a href="/linuxiha/farbodgame/systemctl/"><h2 class="post-title">مدیریت سرویس‌ها توسط systemctl</h2></a>
                <div class="post-date"><time datetime="2016-08-08" itemprop="datePublished">دوشنبه، ۱۸&nbsp;مرداد&nbsp;۱۳۹۵</time></div>
                <div class="post-body">
                    <a name="more"></a>
<p>در این مطلب قصد داریم دستورات systemctl را آموزش بدهیم که ابزار اصلی برای کنترل سرویس‌ها و init است. در ادامه نگاهی می‌اندازیم که چگونه سرویس‌ها را مدیریت کنیم و در نهایت وضعیتشان را بررسی کنیم.</p>

<h2>شروع و متوقف کردن سرویس‌ها</h2>

<p>برای شروع کردن یک سرویس systemd باید از دستور <code>start</code>
استفاده کنیم.</p>

<p>اگر شما یک کاربر غیر ریشه هستید لطفا روت شوید و یا قبل از دستور <code>sudo</code> بگذارید تا دستور با دسترسی ریشه اجرا شود در غیر این صورت ممکن که دستور شما عمل نکند.</p>

<pre><code>systemctl start APPLICATION.service
</code></pre>

<p>توسط این دستور شما می‌توانید سرویس خود را شروع کنید.</p>

<p>برای مثال توسط این دستور میتوانید وب سرور nginx را فعال نمایید (لازم به ذکر است که اگر شما نام سرویسی را که می‌خواهید استفاده کنید را نمی‌دانید، می‌توانید با نوشتن فقط یکی دو حرف اول آن سرویس و سپس زدن دو بار پشت سر هم کلید <code>TAB</code> نام آن را کامل کنید.).</p>

<pre><code>systemctl start nginx.service
</code></pre>

<p>systemd برای کنترل کردن یک سرویس، به دنبال <code>*.service</code> (همانطور که می‌دانید ستاره یک <code>wild card</code> و به معنی هر چیزی است) می‌گردد، بنابر این شما می‌توانید برای راحتی کار به این صورت سرویس‌های خود را مدیریت کنید.</p>

<pre><code>systemctl start nginx
</code></pre>

<p>درصورتی که می‌خواهید سرویسی را که شروع کرده‌اید، متوقف
کنید می‌توانید به همین شیوه عمل کنید با این تفاوت که به جای <code>start</code> از <code>stop</code> استفاده کنید.</p>

<pre><code>systemctl stop APPLICATION.service
</code></pre>

<h2>بارگذاری و راه اندازی مجدد سرویس‌ها</h2>

<p>در صورتی که سرویسی را شروع کردید و اکنون می‌خواهید آن را دوباره راه‌اندازی کنید باید از <code>restart</code> استفاده کنید.</p>

<pre><code>systemctl restart APPLICATION.service
</code></pre>

<p>و یا اگر می‌خواهید فقط آن را به صورت مجدد بارگذاری نمایید میتوانید از <code>reload</code> استفاده کنید.</p>

<pre><code>systemctl reload APPLICATION.service
</code></pre>

<p><strong>​نکته:</strong> تفاوت <code>reload</code> و <code>restart</code> در این است که <code>reload</code> فقط فایل کانفیگ ویرایش شده را می‌خواند (و سرویس را مجدد راه‌اندازی نمی‌کند) که عموما بسیار سریع انجام می‌شود. اما اگر می‌خواهید به‌طور کلی یک سرویس را دوباره راه‌اندازی کنید باید از <code>restart</code> استفاده کنید که عموما زمان بیشتری نسبت به بارگذاری طول می‌کشد. اگر مطمئن نیستید که می‌خواهید از کدام استفاده کنید بهتر است که از <code>reload-or-restart</code> استفاده کنید که ابتدا فایل کانفیگ ویرایش شده را مجدد بارگذاری می‌کند و در صورت نیاز سرویس مربوطه را مجدد راه اندازی می‌کند.</p>

<pre><code>systemctl reload-or-restart APPLICATION.service
</code></pre>

<h2>فعال و غیر فعال کردن سرویس‌ها</h2>

<p>در صورتی که سرویس مورد نظر خود را توسط <code>start</code> شروع کرده باشید، با اولین ریبوت همه آنها به تنظیمات خود بازمی‌گردد و ممکن است اصلا بعد از بارگذاری سیستم اجرا نشوند. در صورتی که می‌خواهید systemd سرویس مورد نظر شما را هنگام بوت به صورت خودکار فعال کند باید از enable استفاده کنید. به این صورت.</p>

<pre><code>systemctl enable APPLICATION.service
</code></pre>

<p>این کار یک لینک از <code>/etc/systemd/system</code> (و در بعضی سیستم ها <code>/lib/systemd/system</code>) ایجاد می‌کند در مسیری که systemd در آن به دنیال فایل هایی می‌گردد که باید هنگام بوت آنها را شروع کند. (معمولا در <code>/etc/systemd/system/some-target.target.wants​_</code>)</p>

<p>اگر می‌خواهید عکس این کار را انجام دهید، یعنی وقتی سیستم بوت شد آن سرویس به طور پیشفرض اجرا نشود باید از <code>disable</code> استفاده کنید، به این صورت.</p>

<pre><code>systemctl disable APPLICATION.service
</code></pre>

<p>برای مثال درصورتی که می‌خواهید جلوی اجرا شدن خودکار وب سرور nginx را هنگام بوت بگیرید باید به این صورت عمل کنید.</p>

<pre><code>systemctl disable nginx.service
</code></pre>

<h2>وضعیت یک سرویس</h2>

<p>در صورتی که می‌خواهید وضعیت یک سرویس را بررسی کنید (برای مثال مطمئن شوید که سرویس شروع و یا متوقف شده است و یا چند خط اول لاگ را بررسی کنید) میتوانید از <code>status</code> استفاده نمایید.</p>

<pre><code>systemctl status APPLICATION.service
</code></pre>

<p>برای مثال، در صورتی که وضعیت وب سرور nginx را بررسید کنید با خطوطی شبیه به این مواجه می‌شوید:</p>

<pre><code>nginx.service - A high performance web server and a reverse proxy server
Loaded: loaded (/usr/lib/systemd/system/nginx.service; enabled; vendor preset:  disabled)
Active: active (running) since Tue 2015-01-27 19:41:23 EST; 22h ago Main PID: 495   (nginx)
CGroup: /system.slice/nginx.service
├─495 nginx: master process /usr/bin/nginx -g pid /run/nginx.pid; error_log stderr;
└─496 nginx: worker processJan 27 19:41:23 desktop systemd[1]: Starting A high  performance web server and a reverse proxy server...Jan 27 19:41:23 desktop     systemd[1]: Started A high performance web server and a reverse proxy server.
</code></pre>

<p>اگر می‌خواهید مطمئن شوید سرویسی که می‌خواهید شروع یا متوقف شده است (برای مثال در اسکریپت نویسی) می‌توانید از <code>is-active</code> استفاده کنید.</p>

<pre><code>systemctl is-active APPLICATION.service
</code></pre>

<p>خروجی این دستور در صورتی که سرویس مورد نظر شما شروع شده باشد <code>active</code> خواهد بود و در غیر این صورت <code>inactive</code>.</p>

<p>و به همین ترتیب، اگر می‌خواهید مطمئن شوید که سرویس شما فعال است یا غیر فعال (الان شما دیگه می‌دونید که فرق غیر فعال با متوقف چیه :) ) می‌توانید از <code>is-enabled</code> استفاده کنید.</p>

<pre><code>systemctl is-enabled APPLICATION.service
</code></pre>

<p>خروجی این دستور هم در صورت فعال بودن <code>enable</code> و در صورت غیر فعال بودن <code>disable</code> خواهد بود.</p>

<p>منبع با اندکی تغییر:
<a href="https://www.digitalocean.com/community/tutorials/how-to-use-systemctl-to-manage-systemd-services-and-units">How To Use Systemctl to Manage Systemd Services and Units</a></p>
                </div>                 
                
                categories: 
                <div class="post-meta">                        <a href="/linuxiha/categories/آموزشی/">آموزشی</a>,                         <a href="/linuxiha/categories/پیکربندی/">پیکربندی</a>                </div>
                                 
                
                tags: 
                <div class="post-meta">                        <a href="/linuxiha/tags/پیکربندی/">پیکربندی</a>,                         <a href="/linuxiha/tags/systemctl/">systemctl</a>,                         <a href="/linuxiha/tags/systemd/">systemd</a>                </div>
                                 
                
                author: 
                <div class="post-meta">                        <a href="/linuxiha/author/farbodgame/">farbodgame</a>                </div>
                                 
                            </div>
            <div class="separator">✻</div>
            </div>
            

            <div class="col-md-10 col-md-offset-1">
                <nav aria-label="Page navigation">
                    <ul class="pager">
                        
                        <li class="previous"><a href="/linuxiha/rmasoumvand/raid/"><span aria-hidden="true">&larr;</span> راه اندازی RAID در لینوکس</a></li>
                        
                        
                        <li class="next"><a href="/linuxiha/rmasoumvand/samba/">راه اندازی سرویس Samba در لینوکس <span aria-hidden="true">&rarr;</span></a></li>
                        
                    </ul>
                </nav>
            </div>
            </div>
        </div>
    </div>
  <footer class="footer footer-big footer-color-black" data-color="black">
    <div class="container">
        <div class="row">
            <div class="col-md-2 col-sm-3">
                <div class="info">
                    <h5 class="title">Company</h5>
                    <nav>
                        <ul>
                            <li>
                                <a href="/">Home</a></li>
                            <li>
                                <a href="#">Find offers</a>
                            </li>
                            <li>
                                <a href="#">Discover Projects</a>
                            </li>
                            <li>
                                <a href="#">Portfolio</a>
                            </li>
                            <li>
                                <a href="#">About me</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
            <div class="col-md-3 col-md-offset-1 col-sm-3">
                <div class="info">
                    <h5 class="title"> Help and Support</h5>
                     <nav>
                        <ul>
                            <li>
                                <a href="your-email@domain.com">Contact me</a>
                            </li>
                            <li>
                                <a href="#">How it works</a>
                            </li>
                            <li>
                                <a href="#">Terms &amp; Conditions</a>
                            </li>
                            <li>
                                <a href="#">Policy</a>
                            </li>
                            <li>
                                <a href="#">License</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
            <div class="col-md-3 col-sm-3">
                <div class="info">
                    <h5 class="title">Latest posts</h5>
                    <nav>
                        <ul>
                            
                        </ul>
                    </nav>
                </div>
            </div>
            <div class="col-md-2 col-md-offset-1 col-sm-3">
                <div class="info">
                    <h5 class="title">Follow me on</h5>
                    
                    <nav>
                        <ul>
                            
                            <li>
                                <a href="https://twitter.com/Twitter_UserName" class="btn btn-social btn-twitter btn-simple">
                                    <i class="fa fa-twitter"></i> twitter
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/GitHub_UserName" class="btn btn-social btn-github btn-simple">
                                    <i class="fa fa-github"></i> github
                                </a>
                            </li>
                            <li>
                                <a href="https://instagram.com/NAME" class="btn btn-social btn-instagram btn-simple">
                                    <i class="fa fa-instagram"></i> instagram
                                </a>
                            </li>
                            <li>
                                <a href="https://instagram.com/NAME" class="btn btn-social btn-google-plus-square btn-simple">
                                    <i class="fa fa-google-plus-square"></i> google+
                                </a>
                            </li>
                            <li>
                                <a href="https://instagram.com/NAME" class="btn btn-social btn-facebook-square btn-simple">
                                    <i class="fa fa-facebook-square"></i> facebook
                                </a>
                            </li>                        </ul>
                    </nav>
                    
                </div>
            </div>
        </div>
        <hr>
        <div class="copyright">
             <p>© <script> document.write(new Date().getFullYear()) </script></p>
             <p>generated by <a href="https://miraxy.github.io/">mira</a></p>
        </div>
    </div>
  </footer>


    <script src="/static/theme/maira/js/jquery.min.js"></script>
    <script src="/static/theme/maira/js/modernizr.js"></script>
    <script src="/static/theme/maira/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="/static/theme/maira/js/run.js" type="text/javascript"></script>
    <script src="/static/theme/maira/js/gaia.js" type="text/javascript"></script>
    <script src="/static/theme/maira/js/prettify/prettify.js" type="text/javascript"></script>

  </body>
</html>